(function(){"use strict";var e={3275:function(e,t,o){var a=o(5130),s=o(6768);const l=(0,s.Lk)("br",null,null,-1),n=(0,s.Lk)("br",null,null,-1);function r(e,t,o,a,r,i){const c=(0,s.g2)("AppNavbar"),d=(0,s.g2)("NotificationApp"),u=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(c),(0,s.bF)(d,{message:a.notification.message,type:a.notification.type},null,8,["message","type"]),l,n,(0,s.bF)(u)])}var i=o(4232);const c=e=>((0,s.Qi)("data-v-1f5c9874"),e=e(),(0,s.jt)(),e),d={class:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},u={class:"container"},m=["src"],p=c((()=>(0,s.Lk)("a",{class:"navbar-brand",href:"#"},"Toobo",-1))),k=c((()=>(0,s.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s.Lk)("span",{class:"navbar-toggler-icon"})],-1))),b={class:"collapse navbar-collapse",id:"navbarSupportedContent"},g={class:"navbar-nav ms-auto mb-2 mb-lg-0"},v={class:"nav-item"},h={key:0,class:"nav-item"},L={key:1,class:"nav-item"},y={key:2,class:"nav-item"},f={class:"nav-link"},C={key:3,class:"nav-item"},w={key:4,class:"nav-item"};function P(e,t,o,a,l,n){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",d,[(0,s.Lk)("div",u,[(0,s.Lk)("img",{src:l.logoUrl,alt:"Logo",class:"navbar-logo"},null,8,m),p,k,(0,s.Lk)("div",b,[(0,s.Lk)("ul",g,[(0,s.Lk)("li",v,[(0,s.bF)(r,{class:"nav-link active",to:"/"},{default:(0,s.k6)((()=>[(0,s.eW)("Home")])),_:1})]),a.isLoggedIn?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("li",h,[(0,s.bF)(r,{class:"nav-link",to:"/login"},{default:(0,s.k6)((()=>[(0,s.eW)("Login")])),_:1})])),a.isLoggedIn?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("li",L,[(0,s.bF)(r,{class:"nav-link",to:"/register"},{default:(0,s.k6)((()=>[(0,s.eW)("Register")])),_:1})])),a.isLoggedIn?((0,s.uX)(),(0,s.CE)("li",y,[(0,s.Lk)("span",f,(0,i.v_)(a.username),1)])):(0,s.Q3)("",!0),a.isLoggedIn?((0,s.uX)(),(0,s.CE)("li",C,[(0,s.Lk)("button",{class:"btn btn-link nav-link",onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e))},"Logout")])):(0,s.Q3)("",!0),a.isAdmin?((0,s.uX)(),(0,s.CE)("li",w,[(0,s.bF)(r,{class:"nav-link",to:"/admin-dashboard"},{default:(0,s.k6)((()=>[(0,s.eW)("Dashboard")])),_:1})])):(0,s.Q3)("",!0)])])])])}o(4114);var E=o(782),A=o(1387);function U(e,t,o,a,l,n){const r=(0,s.g2)("AppMaps"),i=(0,s.g2)("MeteoApp"),c=(0,s.g2)("AppShop");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(r),(0,s.bF)(i),(0,s.bF)(c)])}const M=e=>((0,s.Qi)("data-v-40bc4d8e"),e=e(),(0,s.jt)(),e),I=M((()=>(0,s.Lk)("br",null,null,-1))),K={class:"map-container rounded-map"},j={ref:"geocoderContainer",class:"geocoder-container flex-center"},F={ref:"map",class:"map"},R={ref:"geolocateContainer",class:"geolocate-container"},x=M((()=>(0,s.Lk)("div",{class:"geolocate-control custom-geolocate-button"},null,-1))),$=[x];function X(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)(s.FK,null,[I,(0,s.Lk)("div",K,[(0,s.Lk)("div",j,null,512),(0,s.Lk)("div",F,null,512),(0,s.Lk)("div",R,$,512)])],64)}var _=o(2693),N=o.n(_),T=o(8832),O=o.n(T),J={data(){return{searchQuery:"",mapboxAccessToken:"pk.eyJ1IjoidGlibzYxIiwiYSI6ImNsc2ttaWd5NDA0anEya3JuN2F4cWJheDIifQ.8Y7HydMrAImeaYD6xPm_vg"}},mounted(){N().accessToken=this.mapboxAccessToken,this.map=new(N().Map)({container:this.$refs.map,style:"mapbox://styles/mapbox/navigation-preview-night-v4",center:[2.3522,48.8566],zoom:11,attributionControl:!1});const e=new(N().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0});if(this.map.addControl(e),window.innerWidth<=600){const e=new(O())({accessToken:N().accessToken,mapboxgl:N(),placeholder:"Entrez une adresse"}),t=e.onAdd(this.map);this.$refs.geocoderContainer.appendChild(t)}else{const e=new(O())({accessToken:N().accessToken,mapboxgl:N(),placeholder:"Entrez une adresse"});this.map.addControl(e,"top-left"),this.map.addControl(new(N().NavigationControl)({showCompass:!1}))}}},V=o(1241);const S=(0,V.A)(J,[["render",X],["__scopeId","data-v-40bc4d8e"]]);var Q=S;const D={class:"container"},W=(0,s.Lk)("div",{id:"openweathermap-widget-15"},null,-1),z=[W];function B(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div",D,z)}var q={mounted(){window.myWidgetParam?window.myWidgetParam:window.myWidgetParam=[],window.myWidgetParam.push({id:15,cityid:"3003603",appid:"740ecf1f34a8de40fb609316e481a77e",units:"metric",containerid:"openweathermap-widget-15"}),function(){var e=document.createElement("script");e.async=!0,e.charset="utf-8",e.src="//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}};const Z=(0,V.A)(q,[["render",B]]);var G=Z;const H=e=>((0,s.Qi)("data-v-23a3707a"),e=e(),(0,s.jt)(),e),Y=H((()=>(0,s.Lk)("br",null,null,-1))),ee={key:0,ref:"productsSection",class:"products-container"},te=["src","alt"],oe=["onClick"],ae={key:1,ref:"productsSection",class:"products-container"},se=["src","alt"],le={class:"button-container"},ne={key:2,class:"button-container"},re={class:"category-buttons"},ie={key:1,ref:"categoryButtons"},ce=["onClick"],de={class:"modal-dialog"},ue={class:"modal-content"},me={class:"modal-header"},pe=H((()=>(0,s.Lk)("h5",{class:"modal-title"},"Ajouter un produit",-1))),ke={class:"modal-body"},be={class:"mb-3"},ge=H((()=>(0,s.Lk)("label",{class:"form-label"},"Nom du produit",-1))),ve={class:"mb-3"},he=H((()=>(0,s.Lk)("label",{class:"form-label"},"Prix du produit",-1))),Le={class:"mb-3"},ye=H((()=>(0,s.Lk)("label",{class:"form-label"},"Lien de la photo du produit ou télécharger un fichier",-1))),fe=H((()=>(0,s.Lk)("label",{for:"link"},"Lien",-1))),Ce=H((()=>(0,s.Lk)("label",{for:"file"},"Fichier",-1))),we={class:"mb-3"},Pe=H((()=>(0,s.Lk)("label",{class:"form-label"},"Catégorie du produit",-1))),Ee=["value"],Ae=H((()=>(0,s.Lk)("option",{value:"new"},"Ajouter une nouvelle catégorie",-1))),Ue=H((()=>(0,s.Lk)("br",null,null,-1))),Me={class:"modal-footer"};function Ie(e,t,o,l,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[Y,(0,s.Lk)("div",null,["myCollection"===n.currentCollection?((0,s.uX)(),(0,s.CE)("div",ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.userProducts,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.name,class:"product-item"},[(0,s.Lk)("img",{src:e.image,alt:e.name,class:"product-image",onLoad:t[0]||(t[0]=(...e)=>l.scrollToProduct&&l.scrollToProduct(...e))},null,40,te),(0,s.Lk)("div",null,(0,i.v_)(e.name),1),(0,s.Lk)("div",null,(0,i.v_)(e.price),1),l.isLoggedIn?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"remove-from-collection-button",onClick:t=>r.removeProductFromMyCollection(e)},"Supprimer de ma collection",8,oe)):(0,s.Q3)("",!0)])))),128))],512)):((0,s.uX)(),(0,s.CE)("div",ae,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.products,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.name,class:"product-item"},[(0,s.Lk)("img",{src:e.image,alt:e.name,class:"product-image",onLoad:t[1]||(t[1]=(...e)=>l.scrollToProduct&&l.scrollToProduct(...e))},null,40,se),(0,s.Lk)("div",null,(0,i.v_)(e.name),1),(0,s.Lk)("div",null,(0,i.v_)(e.price),1)])))),128))],512)),(0,s.Lk)("div",le,["myCollection"===n.currentCollection?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"category-button",onClick:t[2]||(t[2]=e=>n.showAddProductModal=!0)}," Ajouter un produit ")):(0,s.Q3)("",!0)]),l.isLoggedIn?((0,s.uX)(),(0,s.CE)("div",ne,[(0,s.Lk)("div",re,[(0,s.Lk)("button",{class:"category-button",onClick:t[3]||(t[3]=(...e)=>r.handleButtonClick&&r.handleButtonClick(...e))},"Ma Collection"),(0,s.Lk)("button",{class:"category-button",onClick:t[4]||(t[4]=(...e)=>r.handleSiteCollectionClick&&r.handleSiteCollectionClick(...e))}," Collection du Site ")]),l.showMyCollection?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"category-button",onClick:t[5]||(t[5]=e=>n.showAddProductModal=!0)}," Ajouter un produit ")):(0,s.Q3)("",!0),l.showCategories?((0,s.uX)(),(0,s.CE)("div",ie,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.filteredCategories,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:"category-button",onClick:t=>{l.fetchProducts(e),l.selectedCategory=e}},(0,i.v_)(e),9,ce)))),128))],512)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),n.showAddProductModal?((0,s.uX)(),(0,s.CE)("div",{key:3,class:(0,i.C4)(["modal",{"show d-block":n.showAddProductModal}]),tabindex:"-1"},[(0,s.Lk)("div",de,[(0,s.Lk)("div",ue,[(0,s.Lk)("div",me,[pe,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[6]||(t[6]=e=>n.showAddProductModal=!1)})]),(0,s.Lk)("div",ke,[(0,s.Lk)("div",be,[ge,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>n.newProduct.name=e),class:"form-control",placeholder:"Entrez le nom du produit"},null,512),[[a.Jo,n.newProduct.name]])]),(0,s.Lk)("div",ve,[he,(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>n.newProduct.price=e),class:"form-control",placeholder:"Entrez le prix du produit"},null,512),[[a.Jo,n.newProduct.price]])]),(0,s.Lk)("div",Le,[ye,(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio",id:"link",value:"link","onUpdate:modelValue":t[9]||(t[9]=e=>n.imageOption=e)},null,512),[[a.XL,n.imageOption]]),fe,(0,s.bo)((0,s.Lk)("input",{type:"radio",id:"file",value:"file","onUpdate:modelValue":t[10]||(t[10]=e=>n.imageOption=e)},null,512),[[a.XL,n.imageOption]]),Ce]),"link"===n.imageOption?(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:0,type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.newProduct.image=e),class:"form-control",placeholder:"Entrez le lien de l'image du produit"},null,512)),[[a.Jo,n.newProduct.image]]):((0,s.uX)(),(0,s.CE)("input",{key:1,type:"file",onChange:t[12]||(t[12]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),class:"form-control"},null,32))]),(0,s.Lk)("div",we,[Pe,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.newProduct.category=e),class:"form-control"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.categories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Ee)))),128)),Ae],512),[[a.u1,n.newProduct.category]]),Ue,"new"===n.newProduct.category?(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:0,type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.newCategory=e),class:"form-control",placeholder:"Entrez le nom de la nouvelle catégorie"},null,512)),[[a.Jo,n.newCategory]]):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Me,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[15]||(t[15]=e=>n.showAddProductModal=!1)},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[16]||(t[16]=(...e)=>r.addProduct&&r.addProduct(...e))},"Ajouter le produit")])])])],2)):(0,s.Q3)("",!0)])],64)}o(4603),o(7566),o(8721);var Ke=o(5600),je=o(144),Fe=o(4161),Re=o(7844),xe={data(){return{currentCollection:"siteCollection",newCategory:"",userId:null,imageOption:"link",showAddProductModal:!1,newProduct:{name:"",price:"",image:"",category:""},uploadedFile:null}},created(){const e=(0,Ke.xI)();this.userId=e.currentUser?e.currentUser.uid:null,this.fetchCategories(),this.userId&&(this.currentCollection="myCollection")},methods:{fetchMyCollection:function(){return new Promise((e=>{const t=(0,Fe.C3)(),o=(0,Fe.KR)(t,`users/${this.userId}/products`);console.log(`Fetching products from: users/${this.userId}/products`),(0,Fe.Zy)(o,(t=>{const o=t.val();console.log("Fetched data:",o),o&&(this.userProducts=Object.keys(o).map((e=>Object.keys(o[e]).map((t=>({category:e,name:t,...o[e][t]}))))).flat()),e()}))}))},fetchCategories:async function(){const e=(0,Fe.C3)(),t=(0,Fe.KR)(e,"products");(0,Fe.Zy)(t,(e=>{const t=e.val();t&&(this.categories=Object.keys(t))}))},handleSiteCollectionClick(){this.currentCollection="siteCollection",this.resetView()},resetView(){this.showCategories=!this.showCategories,this.showMyCollection=!1,this.scrollToCategories(),this.selectedCategory=null,this.products=[]},removeProductFromMyCollection(e){const t=(0,Fe.C3)(),o=(0,Fe.KR)(t,`users/${this.userId}/products/${e.category}/${e.name}`);(0,Fe.TF)(o).then((()=>{this.$store.dispatch("showNotification",{message:"Produit supprimé de votre collection avec succès !",type:"success"});const t=this.userProducts.findIndex((t=>t.name===e.name&&t.category===e.category));-1!==t&&(this.userProducts.splice(t,1),this.userProducts=[...this.userProducts]),this.fetchMyCollection()}))},addProductToMyCollection(e){const t=(0,Fe.C3)(),o=(0,Fe.KR)(t,`users/${this.userId}/myCollection/${e.category}/${e.name}`);(0,Fe.hZ)(o,e)},handleFileUpload(e){const t=e.target.files[0];this.uploadedFile=t,this.newProduct.image=URL.createObjectURL(t)},handleButtonClick(){this.currentCollection="myCollection",console.log("Fetching my collection..."),this.fetchMyCollection().then((()=>{this.showCategories=!1,this.products=[],window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}))},addProduct:async function(){if(!this.newProduct.name||!this.newProduct.price||!this.newProduct.image||!this.newProduct.category)return void this.$store.dispatch("showNotification",{message:"Veuillez remplir tous les champs.",type:"error"});if("file"===this.imageOption&&!(this.uploadedFile instanceof File))return void console.error("uploadedFile is not a File object");let e=this.newProduct.image;"file"===this.imageOption&&(e=await this.uploadImage(this.uploadedFile,this.userId));const t=(0,Fe.C3)(),o="new"===this.newProduct.category?this.newCategory:this.newProduct.category,a=(0,Fe.KR)(t,`users/${this.userId}/products/${o}/${this.newProduct.name}`);(0,Fe.hZ)(a,{name:this.newProduct.name,image:e,price:this.newProduct.price}).then((()=>{this.newProduct.name="",this.newProduct.price="",this.newProduct.category="",this.newProduct.image="",this.newCategory="",this.uploadedFile=null,this.showAddProductModal=!1,this.$store.dispatch("showNotification",{message:"Produit ajouté avec succès !",type:"success"}),"new"===this.newProduct.category&&(this.categories=[...this.categories,this.newCategory])}))},uploadImage:async function(e,t){const o=(0,Re.c7)(),a=(0,Re.KR)(o,`users/${t}/products/${e.name}`),s=(0,Re.bp)(a,e);return new Promise(((e,t)=>{s.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(e=>{t(e)}),(()=>{(0,Re.qk)(s.snapshot.ref).then((t=>{e(t)}))}))}))}},mounted(){},setup(){const e=(0,je.KR)(""),t=(0,je.KR)(""),o=(0,je.KR)(""),a=(0,je.KR)(["Jeans","T-shirt","Chaussette","Chaussure"]),l=(0,je.KR)([]),n=(0,je.KR)(""),r=(0,E.Pj)(),i=(0,s.EW)((()=>r.state.admin)),c=(0,s.EW)((()=>r.state.isLoggedIn)),d=(0,je.KR)(!1),u=(0,je.KR)(!1),m=(0,je.KR)(null),p=(0,je.KR)(null),k=()=>{(0,s.dY)((()=>{m.value&&m.value.scrollIntoView({behavior:"smooth"})}))},b=async e=>{const t=(0,Fe.C3)(),o=(0,Fe.KR)(t,`products/${e}`);(0,Fe.Zy)(o,(e=>{l.value=e.val()}))},g=()=>{(0,s.dY)((()=>{const e=document.querySelector(".product-image");e&&e.scrollIntoView({behavior:"smooth"})}))};(0,s.wB)(l,(()=>{(0,s.dY)((()=>{const e=document.querySelector(".product-image");e&&e.scrollIntoView({behavior:"smooth"})}))}));const v=(0,s.EW)((()=>a.value)),h=async()=>{const e=(0,Fe.C3)(),t=(0,Fe.KR)(e,"siteCollection");(0,Fe.Zy)(t,(e=>{l.value=e.val()}))};return{fetchSiteCollection:h,isAdmin:i,name:e,price:t,category:o,categories:a,products:l,fetchProducts:b,scrollToProduct:g,message:n,filteredCategories:v,isLoggedIn:c,showCategories:d,showMyCollection:u,categoryButtons:m,scrollToCategories:k,selectedCategory:p}}};const $e=(0,V.A)(xe,[["render",Ie],["__scopeId","data-v-23a3707a"]]);var Xe=$e,_e={name:"HomePage",components:{AppMaps:Q,MeteoApp:G,AppShop:Xe},setup(){const e=(0,E.Pj)(),t=(0,s.EW)((()=>e.state.admin)),o=(0,s.EW)((()=>e.state.isLoggedIn));return{isAdmin:t,isLoggedIn:o}}};const Ne=(0,V.A)(_e,[["render",U]]);var Te=Ne;const Oe=e=>((0,s.Qi)("data-v-4d2a7d9a"),e=e(),(0,s.jt)(),e),Je=Oe((()=>(0,s.Lk)("br",null,null,-1))),Ve={class:"container mt-5"},Se={class:"row justify-content-center"},Qe={class:"col-md-12"},De={class:"card"},We=Oe((()=>(0,s.Lk)("div",{class:"card-header"},"Login",-1))),ze={class:"card-body"},Be={class:"mb-3"},qe=Oe((()=>(0,s.Lk)("label",{class:"form-label"},"Email",-1))),Ze={class:"mb-3"},Ge=Oe((()=>(0,s.Lk)("label",{class:"form-label"},"Password",-1))),He=Oe((()=>(0,s.Lk)("button",{type:"submit",class:"btn btn-primary"},"Login",-1)));function Ye(e,t,o,l,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[Je,(0,s.Lk)("div",Ve,[(0,s.Lk)("div",Se,[(0,s.Lk)("div",Qe,[(0,s.Lk)("div",De,[We,(0,s.Lk)("div",ze,[(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,s.Lk)("div",Be,[qe,(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),class:"form-control",placeholder:"Email",required:""},null,512),[[a.Jo,l.email]])]),(0,s.Lk)("div",Ze,[Ge,(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),class:"form-control",placeholder:"Password",required:""},null,512),[[a.Jo,l.password]])]),He],32)])])])])])],64)}var et={setup(){const e=(0,E.Pj)(),t=(0,je.KR)(""),o=(0,je.KR)(""),a=async()=>{const a=(0,Ke.xI)();try{const s=await(0,Ke.x9)(a,o.value,t.value),l=s.user,n=(0,Fe.C3)(),r=(0,Fe.KR)(n,`users/${l.uid}`),i=await(0,Fe.Jt)(r);i.exists()&&(l.username=i.val().username);const c=await e.dispatch("login",l);c?ts.push("/admin-dashboard"):ts.push("/"),e.dispatch("showNotification",{message:"Connexion réussie",type:"success"}),o.value="",t.value=""}catch(s){console.error(s.code),console.error(s.message),e.dispatch("showNotification",{message:s.message,type:"error"})}};return{email:o,password:t,login:a}}};const tt=(0,V.A)(et,[["render",Ye],["__scopeId","data-v-4d2a7d9a"]]);var ot=tt;const at=e=>((0,s.Qi)("data-v-599d3cc0"),e=e(),(0,s.jt)(),e),st=at((()=>(0,s.Lk)("br",null,null,-1))),lt={class:"container mt-5"},nt={class:"row justify-content-center"},rt={class:"col-md-12"},it={class:"card"},ct=at((()=>(0,s.Lk)("div",{class:"card-header"},"Inscription",-1))),dt={class:"card-body"},ut={class:"mb-3"},mt=at((()=>(0,s.Lk)("label",{class:"form-label"},"Nom d'utilisateur",-1))),pt={class:"mb-3"},kt=at((()=>(0,s.Lk)("label",{class:"form-label"},"Email",-1))),bt={class:"mb-3"},gt=at((()=>(0,s.Lk)("label",{class:"form-label"},"Mot de passe",-1))),vt=at((()=>(0,s.Lk)("button",{type:"submit",class:"btn btn-primary"},"Inscription",-1))),ht=at((()=>(0,s.Lk)("br",null,null,-1)));function Lt(e,t,o,l,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[st,(0,s.Lk)("div",lt,[(0,s.Lk)("div",nt,[(0,s.Lk)("div",rt,[(0,s.Lk)("div",it,[ct,(0,s.Lk)("div",dt,[(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[(0,s.Lk)("div",ut,[mt,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),class:"form-control",placeholder:"Nom d'utilisateur",required:""},null,512),[[a.Jo,l.username]])]),(0,s.Lk)("div",pt,[kt,(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>l.email=e),class:"form-control",placeholder:"Email",required:""},null,512),[[a.Jo,l.email]])]),(0,s.Lk)("div",bt,[gt,(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>l.password=e),class:"form-control",placeholder:"Mot de passe",required:""},null,512),[[a.Jo,l.password]])]),vt],32),ht])])])])])],64)}var yt={setup(){const e=(0,E.Pj)(),t=(0,je.KR)(""),o=(0,je.KR)(""),a=(0,je.KR)(""),s=async()=>{const s=(0,Ke.xI)();(0,Ke.eG)(s);const l=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;if(l.test(a.value))if(o.value.length<6)e.dispatch("showNotification",{message:"Le mot de passe doit comporter au moins 6 caractères",type:"error"});else try{const l=await(0,Ke.eJ)(s,a.value,o.value),n=l.user,r=(0,Fe.C3)(),i=(0,Fe.KR)(r,`users/${n.uid}`);await(0,Fe.hZ)(i,{admin:!1,email:n.email,username:t.value});const c=await(0,Fe.Jt)(i);c.exists()&&(n.username=c.val().username,n.admin=c.val().admin);const d=await e.dispatch("login",n);d?ts.push("/admin-dashboard"):ts.push("/"),e.dispatch("showNotification",{message:"Inscription réussie",type:"success"}),t.value="",o.value="",a.value=""}catch(n){console.error(n.code),console.error(n.message),e.dispatch("showNotification",{message:n.message,type:"error"})}else e.dispatch("showNotification",{message:"L'email n'est pas valide",type:"error"})};return{username:t,password:o,email:a,register:s}}};const ft=(0,V.A)(yt,[["render",Lt],["__scopeId","data-v-599d3cc0"]]);var Ct=ft,wt=o(4912);const Pt=e=>((0,s.Qi)("data-v-2900739f"),e=e(),(0,s.jt)(),e),Et={class:"not-found-container"},At=Pt((()=>(0,s.Lk)("img",{src:wt,alt:"Logo",class:"logo"},null,-1))),Ut=Pt((()=>(0,s.Lk)("h1",null,"404 Not Found",-1))),Mt=Pt((()=>(0,s.Lk)("p",null,"La page que vous recherchez n'existe pas.",-1))),It=[At,Ut,Mt];function Kt(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div",Et,It)}var jt={name:"NotFound"};const Ft=(0,V.A)(jt,[["render",Kt],["__scopeId","data-v-2900739f"]]);var Rt=Ft;const xt=e=>((0,s.Qi)("data-v-5c46105d"),e=e(),(0,s.jt)(),e),$t=xt((()=>(0,s.Lk)("br",null,null,-1))),Xt=xt((()=>(0,s.Lk)("br",null,null,-1))),_t={class:"dashboard"},Nt=xt((()=>(0,s.Lk)("div",{class:"icon"},[(0,s.Lk)("i",{class:"fas fa-users"})],-1))),Tt=xt((()=>(0,s.Lk)("div",{class:"title"},"Gestion des utilisateurs",-1))),Ot=[Nt,Tt],Jt=xt((()=>(0,s.Lk)("div",{class:"icon"},[(0,s.Lk)("i",{class:"fas fa-box-open"})],-1))),Vt=xt((()=>(0,s.Lk)("div",{class:"title"},"Gestion des produits",-1))),St=[Jt,Vt];function Qt(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)(s.FK,null,[$t,Xt,(0,s.Lk)("div",_t,[(0,s.Lk)("div",{class:"card",onClick:t[0]||(t[0]=t=>e.$router.push("/user-management"))},Ot),(0,s.Lk)("div",{class:"card",onClick:t[1]||(t[1]=t=>e.$router.push("/product-management"))},St)])],64)}var Dt={};const Wt=(0,V.A)(Dt,[["render",Qt],["__scopeId","data-v-5c46105d"]]);var zt=Wt;async function Bt(e){const t=(0,Fe.C3)(),o=(0,Fe.KR)(t,`users/${e}`),a=await(0,Fe.Jt)(o),s=a.val();if(s)return!0===s.admin;throw new Error("User does not exist")}var qt=(0,E.y$)({state:{isLoading:!0,isLoggedIn:!1,user:null,admin:!1,users:{},notification:{message:"",type:"info"}},mutations:{setLoading(e,t){e.isLoading=t},setUser(e,t){e.user=t,e.isLoggedIn=!!t,e.admin=!!t&&t.admin,localStorage.setItem("authToken",t.authToken)},setNotification(e,t){e.notification=t}},actions:{async init({dispatch:e}){return new Promise(((t,o)=>{const a=(0,Ke.hg)((0,Ke.xI)(),(o=>{o&&e("checkAdminStatus"),a(),t()}),o)}))},async login({commit:e},t){const o=await Bt(t.uid);return e("setUser",{...t,admin:o}),o},logout({commit:e}){const t=(0,Ke.xI)();(0,Ke.CI)(t).then((()=>{e("setUser",null),localStorage.removeItem("authToken"),localStorage.removeItem("user")})).catch((e=>{console.error(e)}))},showNotification({commit:e},t){e("setNotification",t),setTimeout((()=>{e("setNotification",{message:"",type:"info"})}),3e3)},async checkAdminStatus({commit:e}){const t=(0,Ke.xI)(),o=t.currentUser;if(o)try{const t=await Bt(o.uid),a=(0,Fe.C3)(),s=(0,Fe.KR)(a,`users/${o.uid}`),l=await(0,Fe.Jt)(s);return l.exists()&&(o.username=l.val().username),e("setUser",{...o,admin:t}),Promise.resolve()}catch(a){return Promise.reject(a)}else{const t=JSON.parse(localStorage.getItem("user"));t&&e("setUser",t)}}}});const Zt=e=>((0,s.Qi)("data-v-63a4af42"),e=e(),(0,s.jt)(),e),Gt={class:"mt-5"},Ht={class:"col-6"},Yt={class:"mb-3"},eo=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Gestion des utilisateurs",-1))),to=Zt((()=>(0,s.Lk)("hr",null,null,-1))),oo=Zt((()=>(0,s.Lk)("div",null,null,-1))),ao={class:"table-responsive"},so={class:"table table-striped"},lo=Zt((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Nom d'utilisateur"),(0,s.Lk)("th",null,"Email"),(0,s.Lk)("th",null,"UID"),(0,s.Lk)("th",null,"Admin"),(0,s.Lk)("th",null,"Actions")])],-1))),no={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check-circle-fill svg-icon",viewBox:"0 0 16 16"},ro=Zt((()=>(0,s.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323A.75.75 0 0 0 4.616 8.03l2.363 2.394a.75.75 0 0 0 1.06 0l4.886-4.976a.75.75 0 0 0-.025-1.065z"},null,-1))),io=[ro],co={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill svg-icon",viewBox:"0 0 16 16"},uo=Zt((()=>(0,s.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.293-2.707a1 1 0 0 0-1.414-1.414L8 6.586 5.707 4.293a1 1 0 0 0-1.414 1.414L6.586 8l-2.293 2.293a1 1 0 0 0 1.414 1.414L8 9.414l2.293 2.293a1 1 0 0 0 1.414-1.414L9.414 8l2.293-2.293z"},null,-1))),mo=[uo],po=["onClick"],ko=["onClick"],bo=["onClick"],go={class:"modal-dialog"},vo={class:"modal-content"},ho={class:"modal-header"},Lo=Zt((()=>(0,s.Lk)("h5",{class:"modal-title"},"Modifier l'utilisateur",-1))),yo={class:"modal-body"},fo={class:"mb-3"},Co=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Nom d'utilisateur",-1))),wo={class:"mb-3"},Po=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Admin",-1))),Eo=Zt((()=>(0,s.Lk)("option",{value:!0},"True",-1))),Ao=Zt((()=>(0,s.Lk)("option",{value:!1},"False",-1))),Uo=[Eo,Ao],Mo={class:"modal-footer"},Io={class:"modal-dialog"},Ko={class:"modal-content"},jo={class:"modal-header"},Fo=Zt((()=>(0,s.Lk)("h5",{class:"modal-title"},"Ajouter un utilisateur",-1))),Ro={class:"modal-body"},xo={class:"mb-3"},$o=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Nom d'utilisateur",-1))),Xo={class:"mb-3"},_o=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Mot de passe",-1))),No={class:"mb-3"},To=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Email",-1))),Oo={class:"mb-3"},Jo=Zt((()=>(0,s.Lk)("label",{class:"form-label"},"Admin",-1))),Vo=Zt((()=>(0,s.Lk)("option",{value:!0},"True",-1))),So=Zt((()=>(0,s.Lk)("option",{value:!1},"False",-1))),Qo=[Vo,So],Do={key:0,class:"alert alert-danger"},Wo={class:"modal-footer"};function zo(e,t,o,l,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("button",{class:"btn btn-secondary float-right go-back-button",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},"Retour"),(0,s.Lk)("div",Gt,[(0,s.Lk)("div",Ht,[(0,s.Lk)("div",Yt,[eo,to,(0,s.Lk)("button",{class:"btn btn-success mb-3",onClick:t[1]||(t[1]=(...e)=>l.openAddUserModal&&l.openAddUserModal(...e))},"Ajouter un utilisateur"),oo])]),(0,s.Lk)("div",ao,[(0,s.Lk)("table",so,[lo,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.users,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,i.v_)(e.username),1),(0,s.Lk)("td",null,(0,i.v_)(e.email),1),(0,s.Lk)("td",null,(0,i.v_)(t),1),(0,s.Lk)("td",null,[e.admin?((0,s.uX)(),(0,s.CE)("svg",no,io)):((0,s.uX)(),(0,s.CE)("svg",co,mo))]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:o=>l.openEditUserModal(e,t)},"Modifier",8,po),(0,s.Lk)("button",{class:"btn btn-danger me-2",onClick:e=>l.deleteUser(t)},"Supprimer",8,ko),(0,s.Lk)("button",{class:"btn btn-secondary me-2",onClick:e=>l.toggleAdmin(t)},"Changer le statut d'admin",8,bo)])])))),128))])])]),l.isEditUserModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(["modal",{"show d-block":l.isEditUserModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",go,[(0,s.Lk)("div",vo,[(0,s.Lk)("div",ho,[Lo,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[2]||(t[2]=(...e)=>l.closeEditUserModal&&l.closeEditUserModal(...e))})]),(0,s.Lk)("div",yo,[(0,s.Lk)("div",fo,[Co,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.editedUser.username=e),class:"form-control"},null,512),[[a.Jo,l.editedUser.username]])]),(0,s.Lk)("div",wo,[Po,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.editedUser.admin=e),class:"form-control"},Uo,512),[[a.u1,l.editedUser.admin]])])]),(0,s.Lk)("div",Mo,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>l.closeEditUserModal&&l.closeEditUserModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>l.editUser(l.editedUser,l.editedUser.uid))},"Enregistrer les modifications")])])])],2)):(0,s.Q3)("",!0),l.isAddUserModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,i.C4)(["modal",{"show d-block":l.isAddUserModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",Io,[(0,s.Lk)("div",Ko,[(0,s.Lk)("div",jo,[Fo,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[7]||(t[7]=(...e)=>l.closeAddUserModal&&l.closeAddUserModal(...e))})]),(0,s.Lk)("div",Ro,[(0,s.Lk)("div",xo,[$o,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>l.newUser.username=e),class:"form-control"},null,512),[[a.Jo,l.newUser.username]])]),(0,s.Lk)("div",Xo,[_o,(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[9]||(t[9]=e=>l.newUser.password=e),class:"form-control"},null,512),[[a.Jo,l.newUser.password]])]),(0,s.Lk)("div",No,[To,(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[10]||(t[10]=e=>l.newUser.email=e),class:"form-control"},null,512),[[a.Jo,l.newUser.email]])]),(0,s.Lk)("div",Oo,[Jo,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.newUser.admin=e),class:"form-control"},Qo,512),[[a.u1,l.newUser.admin]])]),l.newUser.errorMessage?((0,s.uX)(),(0,s.CE)("div",Do,(0,i.v_)(l.newUser.errorMessage),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Wo,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...e)=>l.closeAddUserModal&&l.closeAddUserModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=(...e)=>l.addUser&&l.addUser(...e))},"Ajouter l'utilisateur")])])])],2)):(0,s.Q3)("",!0)])],64)}var Bo={methods:{goBack(){this.$router.push("/admin-dashboard")}},setup(){const e=(0,Fe.C3)(),t=(0,je.KR)({}),o=(0,je.KR)(!1),a=(0,je.KR)({}),l=(0,je.KR)(!1),n=(0,je.KR)({});(0,s.sV)((async()=>{const o=(0,Fe.KR)(e,"users");(0,Fe.Zy)(o,(e=>{t.value=e.val()}))}));const r=async t=>{const o=(0,Fe.KR)(e,`users/${t}`),a=await(0,Fe.Jt)(o),s=a.val();await(0,Fe.yo)(o,{admin:!s.admin})},i=(e,t)=>{a.value={...e,uid:t},o.value=!0,console.log(a.value)},c=()=>{o.value=!1},d=async(t,o)=>{const a=(0,Fe.KR)(e,`users/${o}`);await(0,Fe.yo)(a,{admin:t.admin,username:t.username}),c()},u=async e=>{const t=(0,Ke.xI)(),o=t.currentUser;if(o&&o.uid===e){await(0,Ke.hG)(o).catch((t=>{console.error(`Failed to delete user: ${e}`,t)}));const t=(0,Fe.C3)(),a=(0,Fe.KR)(t,`users/${e}`);await(0,Fe.TF)(a).catch((t=>{console.error(`Failed to delete user from database: ${e}`,t)}))}else console.error("User does not exist or is not currently signed in:",e)},m=()=>{n.value={username:"",password:"",admin:!1},l.value=!0},p=()=>{l.value=!1},k=async()=>{const e=(0,Ke.xI)(),{username:t,password:o,email:a,admin:s}=n.value;try{const l=await(0,Ke.eJ)(e,a,o),n=l.user;await(0,Ke.r7)(n,{displayName:t});const r=(0,Fe.C3)(),i=(0,Fe.KR)(r,`users/${n.uid}`);await(0,Fe.yo)(i,{admin:s,email:a,username:t}),p(),qt.dispatch("showNotification",{message:"Utilisateur ajouté avec succès",type:"success"})}catch(l){console.error(`Failed to create user: ${t}`,l.code,l.message),qt.dispatch("showNotification",{message:`Échec de l'ajout de l'utilisateur : ${l.message}`,type:"error"})}};return{users:t,toggleAdmin:r,isEditUserModalOpen:o,editedUser:a,openEditUserModal:i,closeEditUserModal:c,editUser:d,deleteUser:u,isAddUserModalOpen:l,newUser:n,openAddUserModal:m,closeAddUserModal:p,addUser:k}}};const qo=(0,V.A)(Bo,[["render",zo],["__scopeId","data-v-63a4af42"]]);var Zo=qo;const Go=e=>((0,s.Qi)("data-v-31679dfc"),e=e(),(0,s.jt)(),e),Ho={class:"mt-5"},Yo={class:"col-6"},ea={class:"mb-3"},ta=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Gestion des Produits",-1))),oa=["onClick"],aa={class:"mb-3"},sa={class:"table-responsive"},la={class:"table table-striped"},na=Go((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Image"),(0,s.Lk)("th",null,"Nom du produit"),(0,s.Lk)("th",null,"Prix"),(0,s.Lk)("th",null,"Actions")])],-1))),ra=["src"],ia=["onClick"],ca=["onClick"],da={class:"modal-dialog"},ua={class:"modal-content"},ma={class:"modal-header"},pa=Go((()=>(0,s.Lk)("h5",{class:"modal-title"},"Modifier le produit",-1))),ka={class:"modal-body"},ba={class:"mb-3"},ga=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Nom du produit",-1))),va={class:"mb-3"},ha=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Prix du produit",-1))),La={class:"mb-3"},ya=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Lien de la photo du produit",-1))),fa={class:"modal-footer"},Ca={class:"modal-dialog"},wa={class:"modal-content"},Pa={class:"modal-header"},Ea=Go((()=>(0,s.Lk)("h5",{class:"modal-title"},"Ajouter un produit",-1))),Aa={class:"modal-body"},Ua={class:"mb-3"},Ma=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Nom du produit",-1))),Ia={class:"mb-3"},Ka=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Prix du produit",-1))),ja={class:"mb-3"},Fa=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Lien de la photo du produit",-1))),Ra={class:"mb-3"},xa=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Catégorie du produit",-1))),$a=["value"],Xa=Go((()=>(0,s.Lk)("option",{value:"new"},"Ajouter une nouvelle catégorie",-1))),_a={key:0,class:"mb-3"},Na=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Nom de la nouvelle catégorie",-1))),Ta={class:"modal-footer"},Oa={class:"modal-dialog"},Ja={class:"modal-content"},Va={class:"modal-header"},Sa=Go((()=>(0,s.Lk)("h5",{class:"modal-title"},"Supprimer une catégorie",-1))),Qa={class:"modal-body"},Da={class:"mb-3"},Wa=Go((()=>(0,s.Lk)("label",{class:"form-label"},"Catégorie à supprimer",-1))),za=["value"],Ba={class:"modal-footer"};function qa(e,t,o,l,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("button",{class:"btn btn-secondary float-right go-back-button",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},"Retour"),(0,s.Lk)("div",Ho,[(0,s.Lk)("div",Yo,[(0,s.Lk)("div",ea,[ta,(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary me-2",onClick:t[1]||(t[1]=e=>l.selectedCategory="")},"Tous les produits"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.categories,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:"btn btn-outline-secondary me-2",onClick:t=>l.selectedCategory=e},(0,i.v_)(e),9,oa)))),128))])]),(0,s.Lk)("div",aa,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:t[2]||(t[2]=(...e)=>l.openAddProductModal&&l.openAddProductModal(...e))},"Ajouter un produit"),(0,s.Lk)("button",{class:"btn btn-danger me-2",onClick:t[3]||(t[3]=(...e)=>l.openDeleteCategoryModal&&l.openDeleteCategoryModal(...e))},"Supprimer une catégorie")])]),(0,s.Lk)("div",sa,[(0,s.Lk)("table",la,[na,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.filteredProducts,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.name},[(0,s.Lk)("td",null,[(0,s.Lk)("img",{src:e.image,alt:"Product image",class:"product-image"},null,8,ra)]),(0,s.Lk)("td",null,(0,i.v_)(e.name),1),(0,s.Lk)("td",null,(0,i.v_)(e.price),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:t=>l.openEditModal(e)},"Modifier",8,ia),(0,s.Lk)("button",{class:"btn btn-danger me-2",onClick:t=>l.deleteProduct(e,e.category)},"Supprimer",8,ca)])])))),128))])])]),l.isEditModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(["modal",{"show d-block":l.isEditModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",da,[(0,s.Lk)("div",ua,[(0,s.Lk)("div",ma,[pa,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>l.closeEditModal&&l.closeEditModal(...e))})]),(0,s.Lk)("div",ka,[(0,s.Lk)("div",ba,[ga,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.editedProduct.name=e),class:"form-control"},null,512),[[a.Jo,l.editedProduct.name]])]),(0,s.Lk)("div",va,[ha,(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>l.editedProduct.price=e),class:"form-control"},null,512),[[a.Jo,l.editedProduct.price]])]),(0,s.Lk)("div",La,[ya,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>l.editedProduct.image=e),class:"form-control"},null,512),[[a.Jo,l.editedProduct.image]])])]),(0,s.Lk)("div",fa,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[8]||(t[8]=(...e)=>l.closeEditModal&&l.closeEditModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>l.editProduct&&l.editProduct(...e))},"Enregistrer les modifications")])])])],2)):(0,s.Q3)("",!0),l.isAddProductModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,i.C4)(["modal",{"show d-block":l.isAddProductModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",Ca,[(0,s.Lk)("div",wa,[(0,s.Lk)("div",Pa,[Ea,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>l.closeAddProductModal&&l.closeAddProductModal(...e))})]),(0,s.Lk)("div",Aa,[(0,s.Lk)("div",Ua,[Ma,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>l.newProduct.name=e),class:"form-control"},null,512),[[a.Jo,l.newProduct.name]])]),(0,s.Lk)("div",Ia,[Ka,(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>l.newProduct.price=e),class:"form-control"},null,512),[[a.Jo,l.newProduct.price]])]),(0,s.Lk)("div",ja,[Fa,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>l.newProduct.image=e),class:"form-control"},null,512),[[a.Jo,l.newProduct.image]])]),(0,s.Lk)("div",Ra,[xa,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.newProduct.category=e),class:"form-control",onChange:t[15]||(t[15]=(...e)=>l.handleCategoryChange&&l.handleCategoryChange(...e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.categories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,i.v_)(e),9,$a)))),128)),Xa],544),[[a.u1,l.newProduct.category]])]),l.isNewCategory?((0,s.uX)(),(0,s.CE)("div",_a,[Na,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.newCategory=e),class:"form-control"},null,512),[[a.Jo,l.newCategory]])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ta,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[17]||(t[17]=(...e)=>l.closeAddProductModal&&l.closeAddProductModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[18]||(t[18]=(...e)=>l.addProduct&&l.addProduct(...e))},"Ajouter le produit")])])])],2)):(0,s.Q3)("",!0),l.isDeleteCategoryModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:2,class:(0,i.C4)(["modal",{"show d-block":l.isDeleteCategoryModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",Oa,[(0,s.Lk)("div",Ja,[(0,s.Lk)("div",Va,[Sa,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[19]||(t[19]=(...e)=>l.closeDeleteCategoryModal&&l.closeDeleteCategoryModal(...e))})]),(0,s.Lk)("div",Qa,[(0,s.Lk)("div",Da,[Wa,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[20]||(t[20]=e=>l.categoryToDelete=e),class:"form-control"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.categories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,i.v_)(e),9,za)))),128))],512),[[a.u1,l.categoryToDelete]])])]),(0,s.Lk)("div",Ba,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[21]||(t[21]=(...e)=>l.closeDeleteCategoryModal&&l.closeDeleteCategoryModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[22]||(t[22]=(...e)=>l.deleteCategory&&l.deleteCategory(...e))},"Supprimer la catégorie")])])])],2)):(0,s.Q3)("",!0)])],64)}var Za={methods:{goBack(){this.$router.push("/admin-dashboard")}},setup(){const e=(0,je.KR)({}),t=(0,je.KR)(""),o=(0,Fe.C3)(),a=(0,A.rd)(),l=(0,E.Pj)(),n=(0,je.KR)(""),r=(0,E.Pj)(),i=(0,je.KR)(!1),c=(0,je.KR)({}),d=(0,je.KR)(!1),u=(0,je.KR)({}),m=(0,je.KR)(!1),p=(0,je.KR)(""),k=(0,je.KR)(!1),b=(0,je.KR)(!1),g=(0,je.KR)(""),v=()=>{g.value="",b.value=!0},h=()=>{b.value=!1},L=async()=>{const e=(0,Fe.KR)(o,`products/${g.value}`),t=await(0,Fe.Jt)(e),a=t.val();for(const s in a){const e=(0,Fe.KR)(o,`products/${g.value}/${s}`);await(0,Fe.TF)(e).catch((e=>{console.error(`Échec de la suppression du produit : ${s} dans la catégorie : ${g.value}`,e)}))}await(0,Fe.TF)(e).catch((e=>{console.error(`Échec de la suppression de la catégorie : ${g.value}`,e)})),h()},y=()=>{"new"===u.value.category?(k.value=!0,u.value.category=""):k.value=!1},f=()=>{u.value={},d.value=!0},C=()=>{d.value=!1},w=async()=>{k.value&&(u.value.category=p.value);const e=(0,Fe.KR)(o,`products/${u.value.category}/${u.value.name}`);await(0,Fe.hZ)(e,{name:u.value.name,price:u.value.price,image:u.value.image}).catch((e=>{console.error(`Échec de l'ajout du produit : ${u.value.name} dans la catégorie : ${u.value.category}`,e)})),C()},P=()=>{p.value="",m.value=!0},U=()=>{m.value=!1},M=async()=>{const e=(0,Fe.KR)(o,`products/${p.value}`),t={name:p.value,products:{}};await(0,Fe.hZ)(e,t).catch((e=>{console.error(`Échec de l'ajout de la catégorie : ${p.value}`,e)})),U()};(0,s.sV)((async()=>{if(l.state.admin){const t=(0,Fe.KR)(o,"products");(0,Fe.Zy)(t,(t=>{e.value=t.val()}))}else a.push("/")}));const I=e=>{c.value={...e},i.value=!0},K=()=>{i.value=!1},j=async()=>{const e=(0,Fe.KR)(o,`products/${c.value.category}/${c.value.name}`);await(0,Fe.yo)(e,{name:c.value.name,price:c.value.price,image:c.value.image}).catch((e=>{console.error(`Échec de la modification du produit : ${c.value.name} dans la catégorie : ${c.value.category}`,e)})),K()},F=async(e,t)=>{if(t&&e.name){const a=(0,Fe.KR)(o,`products/${t}`),s=await(0,Fe.Jt)(a),l=s.val();if(1===Object.keys(l).length)return void r.dispatch("showNotification",{message:`Échec de la suppression du produit : ${e.name} est le dernier produit de la catégorie : ${t}. Vous ne pouvez pas supprimer le dernier produit d'une catégorie.`,type:"error"});const n=(0,Fe.KR)(o,`products/${t}/${e.name}`);await(0,Fe.TF)(n).catch((o=>{console.error(`Échec de la suppression du produit : ${e.name} dans la catégorie : ${t}`,o)}))}else console.error(`Échec de la suppression du produit : La catégorie ou le nom du produit n'est pas défini. Catégorie : ${t}, Nom du produit : ${e.name}`)},R=(0,s.EW)((()=>Object.keys(e.value))),x=(0,s.EW)((()=>{let o=[];if(e.value){for(const t in e.value){const a=Object.values(e.value[t]);for(const e of a)e.category=t,o.push(e)}t.value&&(o=o.filter((e=>e.category===t.value))),n.value&&(o=o.filter((e=>e.name.includes(n.value))))}return o}));return{products:e,editProduct:j,deleteProduct:F,categories:R,selectedCategory:t,filteredProducts:x,searchTerm:n,isEditModalOpen:i,editedProduct:c,openEditModal:I,closeEditModal:K,isAddProductModalOpen:d,newProduct:u,openAddProductModal:f,closeAddProductModal:C,addProduct:w,isAddCategoryModalOpen:m,newCategory:p,openAddCategoryModal:P,closeAddCategoryModal:U,addCategory:M,isNewCategory:k,handleCategoryChange:y,isDeleteCategoryModalOpen:b,categoryToDelete:g,openDeleteCategoryModal:v,closeDeleteCategoryModal:h,deleteCategory:L}}};const Ga=(0,V.A)(Za,[["render",qa],["__scopeId","data-v-31679dfc"]]);var Ha=Ga;const Ya=[{path:"/admin-dashboard",name:"AdminDashboard",component:zt,meta:{requiresAdmin:!0}},{path:"/",name:"Home",component:Te},{path:"/login",name:"Login",component:ot},{path:"/register",name:"Register",component:Ct},{path:"/admin-dashboard",name:"AdminDashboard",component:zt},{path:"/:pathMatch(.*)*",name:"NotFound",component:Rt},{path:"/admin-dashboard",name:"AdminDashboard",component:zt,meta:{requiresAdmin:!0}},{path:"/user-management",name:"UserManagement",component:Zo,meta:{requiresAdmin:!0}},{path:"/product-management",name:"ProductManagement",component:Ha,meta:{requiresAdmin:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Rt}],es=(0,A.aE)({history:(0,A.LA)("/vuejs-projet-web/"),routes:Ya});es.beforeEach(((e,t,o)=>{e.matched.some((e=>e.meta.requiresAdmin))?qt.state.admin?o():o({name:"Home"}):("Login"===e.name||"Register"===e.name)&&qt.state.isLoggedIn?o({name:"Home"}):o()}));var ts=es,os={data(){return{logoUrl:o(4912)}},setup(){const e=(0,E.Pj)(),t=(0,s.EW)((()=>e.state.isLoggedIn)),o=(0,s.EW)((()=>e.state.user?e.state.user.username:"")),a=(0,s.EW)((()=>e.state.admin)),l=()=>{e.dispatch("logout"),e.commit("logout"),ts.push("/"),e.dispatch("showNotification",{message:"Deconnexion réussie",type:"success"})};return{username:o,isLoggedIn:t,logout:l,isAdmin:a}}};const as=(0,V.A)(os,[["render",P],["__scopeId","data-v-1f5c9874"]]);var ss=as;function ls(e,t,o,a,l,n){return o.message?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(`notification ${o.type}`)},(0,i.v_)(o.message),3)):(0,s.Q3)("",!0)}var ns={props:{message:{type:String,default:""},type:{type:String,default:"info"}}};const rs=(0,V.A)(ns,[["render",ls],["__scopeId","data-v-67915a9c"]]);var is=rs,cs={components:{AppNavbar:ss,NotificationApp:is},setup(){const e=(0,E.Pj)(),t=(0,s.EW)((()=>e.state.notification));return{notification:t}},data(){return{pageTitre:"Accueil"}},mounted(){document.title=this.pageTitre}};const ds=(0,V.A)(cs,[["render",r]]);var us=ds,ms=o(6400);const ps={apiKey:"AIzaSyAJRp8WxcFUDzBzsRnqG-TZTUQG3jWGjnQ",authDomain:"vuejs-ae8a0.firebaseapp.com",databaseURL:"https://vuejs-ae8a0-default-rtdb.europe-west1.firebasedatabase.app",projectId:"vuejs-ae8a0",storageBucket:"vuejs-ae8a0.appspot.com",messagingSenderId:"104652181195",appId:"1:104652181195:web:9bba7498e6fb88baa7d54e",measurementId:"G-2CJPHT3X6K"};(0,ms.Wp)(ps),qt.dispatch("init").then((()=>{const e=(0,a.Ef)(us);e.use(qt),e.use(ts),e.mount("#app")})).catch((e=>{console.error("Failed to init store: ",e)}))},4912:function(e,t,o){e.exports=o.p+"img/LogoToboo.f339544e.png"}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.loaded=!0,l.exports}o.m=e,function(){var e=[];o.O=function(t,a,s,l){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],l=e[d][2];for(var r=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(r=!1,l<n&&(n=l));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,s,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/vuejs-projet-web/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,l,n=a[0],r=a[1],i=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(i)var d=i(o)}for(t&&t(a);c<n.length;c++)l=n[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(d)},a=self["webpackChunkprojet_web"]=self["webpackChunkprojet_web"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(3275)}));a=o.O(a)})();
//# sourceMappingURL=app.39458c0f.js.map