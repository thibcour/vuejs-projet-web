(function(){"use strict";var e={1288:function(e,t,o){var a=o(5130),s=o(6768);const n=(0,s.Lk)("br",null,null,-1),l=(0,s.Lk)("br",null,null,-1);function r(e,t,o,a,r,i){const c=(0,s.g2)("AppNavbar"),d=(0,s.g2)("NotificationApp"),u=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(c),(0,s.bF)(d,{message:a.notification.message,type:a.notification.type},null,8,["message","type"]),n,l,(0,s.bF)(u)])}var i=o(4232);const c=e=>((0,s.Qi)("data-v-1b9d70e4"),e=e(),(0,s.jt)(),e),d={class:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},u={class:"container"},m=["src"],p=c((()=>(0,s.Lk)("a",{class:"navbar-brand",href:"#"},"Toobo",-1))),v=c((()=>(0,s.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s.Lk)("span",{class:"navbar-toggler-icon"})],-1))),b={class:"collapse navbar-collapse",id:"navbarSupportedContent"},k={class:"navbar-nav ms-auto mb-2 mb-lg-0"},g={class:"nav-item"},L={key:0,class:"nav-item"},h={key:1,class:"nav-item"},y={key:2,class:"nav-item"},f={class:"nav-link"},C={key:3,class:"nav-item"},w={key:4,class:"nav-item"};function E(e,t,o,a,n,l){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",d,[(0,s.Lk)("div",u,[(0,s.Lk)("img",{src:n.logoUrl,alt:"Logo",class:"navbar-logo"},null,8,m),p,v,(0,s.Lk)("div",b,[(0,s.Lk)("ul",k,[(0,s.Lk)("li",g,[(0,s.bF)(r,{class:"nav-link active",to:"/"},{default:(0,s.k6)((()=>[(0,s.eW)("Home")])),_:1})]),a.isLoggedIn?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("li",L,[(0,s.bF)(r,{class:"nav-link",to:"/login"},{default:(0,s.k6)((()=>[(0,s.eW)("Login")])),_:1})])),a.isLoggedIn?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("li",h,[(0,s.bF)(r,{class:"nav-link",to:"/register"},{default:(0,s.k6)((()=>[(0,s.eW)("Register")])),_:1})])),a.isLoggedIn?((0,s.uX)(),(0,s.CE)("li",y,[(0,s.Lk)("span",f,(0,i.v_)(a.username),1)])):(0,s.Q3)("",!0),a.isLoggedIn?((0,s.uX)(),(0,s.CE)("li",C,[(0,s.Lk)("button",{class:"btn btn-link nav-link",onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e))},"Logout")])):(0,s.Q3)("",!0),a.isAdmin?((0,s.uX)(),(0,s.CE)("li",w,[(0,s.bF)(r,{class:"nav-link",to:"/admin-dashboard"},{default:(0,s.k6)((()=>[(0,s.eW)("Dashboard")])),_:1})])):(0,s.Q3)("",!0)])])])])}o(4114);var A=o(782),U=o(1387);function M(e,t,o,a,n,l){const r=(0,s.g2)("AppMaps"),i=(0,s.g2)("MeteoApp"),c=(0,s.g2)("AppShop");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(r),(0,s.bF)(i),(0,s.bF)(c)])}const P=e=>((0,s.Qi)("data-v-e585516e"),e=e(),(0,s.jt)(),e),K={class:"map-container"},R={ref:"geocoderContainer",class:"geocoder-container flex-center"},I={ref:"map",class:"map"},x={ref:"geolocateContainer",class:"geolocate-container"},j=P((()=>(0,s.Lk)("div",{class:"geolocate-control custom-geolocate-button"},null,-1))),$=[j];function N(e,t,o,a,n,l){return(0,s.uX)(),(0,s.CE)("div",K,[(0,s.Lk)("div",R,null,512),(0,s.Lk)("div",I,null,512),(0,s.Lk)("div",x,$,512)])}var X=o(2693),F=o.n(X),T=o(8832),_=o.n(T),J={data(){return{searchQuery:"",mapboxAccessToken:"pk.eyJ1IjoidGlibzYxIiwiYSI6ImNsc2ttaWd5NDA0anEya3JuN2F4cWJheDIifQ.8Y7HydMrAImeaYD6xPm_vg"}},mounted(){F().accessToken=this.mapboxAccessToken,this.map=new(F().Map)({container:this.$refs.map,style:"mapbox://styles/mapbox/streets-v11",center:[2.3522,48.8566],zoom:11,attributionControl:!1});const e=new(F().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserLocation:!0});if(this.map.addControl(e),window.innerWidth<=600){const e=new(_())({accessToken:F().accessToken,mapboxgl:F(),placeholder:"Entrez une adresse"}),t=e.onAdd(this.map);this.$refs.geocoderContainer.appendChild(t)}else{const e=new(_())({accessToken:F().accessToken,mapboxgl:F(),placeholder:"Entrez une adresse"});this.map.addControl(e,"top-left"),this.map.addControl(new(F().NavigationControl)({showCompass:!1}))}}},V=o(1241);const O=(0,V.A)(J,[["render",N],["__scopeId","data-v-e585516e"]]);var S=O;const D={class:"container"},Q=(0,s.Lk)("div",{id:"openweathermap-widget-15"},null,-1),W=[Q];function z(e,t,o,a,n,l){return(0,s.uX)(),(0,s.CE)("div",D,W)}var B={mounted(){window.myWidgetParam?window.myWidgetParam:window.myWidgetParam=[],window.myWidgetParam.push({id:15,cityid:"3003603",appid:"740ecf1f34a8de40fb609316e481a77e",units:"metric",containerid:"openweathermap-widget-15"}),function(){var e=document.createElement("script");e.async=!0,e.charset="utf-8",e.src="//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}};const q=(0,V.A)(B,[["render",z]]);var G=q;const Z=e=>((0,s.Qi)("data-v-23ee5154"),e=e(),(0,s.jt)(),e),H={key:0,class:"form-container"},Y=Z((()=>(0,s.Lk)("option",{disabled:"",value:""},"Veuillez sélectionner une catégorie",-1))),ee=Z((()=>(0,s.Lk)("option",null,"Jeans",-1))),te=Z((()=>(0,s.Lk)("option",null,"T-shirt",-1))),oe=Z((()=>(0,s.Lk)("option",null,"Chaussette",-1))),ae=Z((()=>(0,s.Lk)("option",null,"Chaussure",-1))),se=[Y,ee,te,oe,ae],ne=Z((()=>(0,s.Lk)("button",{type:"submit",class:"form-button"},"Ajouter le produit",-1))),le={ref:"productsSection",class:"products-container"},re=["src","alt"],ie={class:"button-container"},ce={key:0},de={key:0,ref:"categoryButtons"},ue=["onClick"],me={key:1},pe={key:1},ve=["onClick"];function be(e,t,o,n,l,r){return(0,s.uX)(),(0,s.CE)("div",null,[n.isAdmin?((0,s.uX)(),(0,s.CE)("div",H,[(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>n.addProduct&&n.addProduct(...e)),["prevent"])),class:"product-form"},[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),placeholder:"Nom du produit",class:"form-input"},null,512),[[a.Jo,n.name]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.image=e),placeholder:"URL de l'image",class:"form-input"},null,512),[[a.Jo,n.image]]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.price=e),placeholder:"Prix du produit",class:"form-input"},null,512),[[a.Jo,n.price]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.category=e),class:"form-input"},se,512),[[a.u1,n.category]]),ne],32)])):(0,s.Q3)("",!0),(0,s.Lk)("div",le,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.products,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.name,class:"product-item"},[(0,s.Lk)("img",{src:e.image,alt:e.name,class:"product-image",onLoad:t[5]||(t[5]=(...e)=>n.scrollToProduct&&n.scrollToProduct(...e))},null,40,re),(0,s.Lk)("div",null,(0,i.v_)(e.name),1),(0,s.Lk)("div",null,(0,i.v_)(e.price),1)])))),128))],512),(0,s.Lk)("div",ie,[n.isLoggedIn?((0,s.uX)(),(0,s.CE)("div",ce,[(0,s.Lk)("button",{class:"category-button",onClick:t[6]||(t[6]=e=>{n.showMyCollection=!n.showMyCollection,n.showCategories=!1})}," Ma Collection "),(0,s.Lk)("button",{class:"category-button",onClick:t[7]||(t[7]=e=>{n.showCategories=!n.showCategories,n.showMyCollection=!1,n.scrollToCategories()})}," Collection du Site "),n.showCategories?((0,s.uX)(),(0,s.CE)("div",de,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredCategories,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:"category-button",onClick:t=>n.fetchProducts(e)},(0,i.v_)(e),9,ue)))),128))],512)):(0,s.Q3)("",!0),n.showMyCollection?((0,s.uX)(),(0,s.CE)("div",me)):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",pe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredCategories,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:"category-button",onClick:t=>n.fetchProducts(e)},(0,i.v_)(e),9,ve)))),128))]))])])}var ke=o(144),ge=o(4161),Le={setup(){const e=(0,ke.KR)(""),t=(0,ke.KR)(""),o=(0,ke.KR)(""),a=(0,ke.KR)(""),n=(0,ke.KR)(["Jeans","T-shirt","Chaussette","Chaussure"]),l=(0,ke.KR)([]),r=(0,ke.KR)(""),i=(0,A.Pj)(),c=(0,s.EW)((()=>i.state.admin)),d=(0,s.EW)((()=>i.state.isLoggedIn)),u=(0,ke.KR)(!1),m=(0,ke.KR)(!1),p=(0,ke.KR)(null),v=()=>{(0,s.dY)((()=>{p.value&&p.value.scrollIntoView({behavior:"smooth"})}))},b=async()=>{if(!e.value||!t.value)return void i.dispatch("showNotification",{message:"Veuillez remplir tous les champs.",type:"error"});const s=/^(ftp|http|https):\/\/[^ "]+$/;if(!s.test(t.value))return void i.dispatch("showNotification",{message:"Veuillez entrer une URL valide.",type:"error"});if(!Number.isInteger(Number(o.value)))return void i.dispatch("showNotification",{message:"Le prix doit être un nombre entier.",type:"error"});if(!a.value)return void i.dispatch("showNotification",{message:"Veuillez sélectionner une catégorie.",type:"error"});const n=(0,ge.C3)(),l=(0,ge.KR)(n,`products/${a.value}/${e.value}`);(0,ge.hZ)(l,{name:e.value,image:t.value,price:o.value}),e.value="",t.value="",o.value="",a.value="",i.dispatch("showNotification",{message:"Le produit a été ajouté avec succès !",type:"success"})},k=async e=>{const t=(0,ge.C3)(),o=(0,ge.KR)(t,`products/${e}`);(0,ge.Zy)(o,(e=>{l.value=e.val()}))},g=()=>{(0,s.dY)((()=>{const e=document.querySelector(".product-image");e&&e.scrollIntoView({behavior:"smooth"})}))};(0,s.wB)(l,(()=>{(0,s.dY)((()=>{const e=document.querySelector(".product-image");e&&e.scrollIntoView({behavior:"smooth"})}))}));const L=(0,s.EW)((()=>n.value)),h=async()=>{const e=(0,ge.C3)(),t=(0,ge.KR)(e,"myCollection");(0,ge.Zy)(t,(e=>{l.value=e.val()}))},y=async()=>{const e=(0,ge.C3)(),t=(0,ge.KR)(e,"siteCollection");(0,ge.Zy)(t,(e=>{l.value=e.val()}))};return{isAdmin:c,name:e,image:t,price:o,category:a,categories:n,products:l,addProduct:b,fetchProducts:k,fetchMyCollection:h,fetchSiteCollection:y,scrollToProduct:g,message:r,filteredCategories:L,isLoggedIn:d,showCategories:u,showMyCollection:m,categoryButtons:p,scrollToCategories:v}}};const he=(0,V.A)(Le,[["render",be],["__scopeId","data-v-23ee5154"]]);var ye=he,fe={name:"HomePage",components:{AppMaps:S,MeteoApp:G,AppShop:ye},setup(){const e=(0,A.Pj)(),t=(0,s.EW)((()=>e.state.admin)),o=(0,s.EW)((()=>e.state.isLoggedIn));return{isAdmin:t,isLoggedIn:o}}};const Ce=(0,V.A)(fe,[["render",M]]);var we=Ce;const Ee={class:"container mt-5"},Ae={class:"row justify-content-center"},Ue={class:"col-md-12"},Me={class:"card"},Pe=(0,s.Lk)("div",{class:"card-header"},"Login",-1),Ke={class:"card-body"},Re={class:"mb-3"},Ie=(0,s.Lk)("label",{class:"form-label"},"Email",-1),xe={class:"mb-3"},je=(0,s.Lk)("label",{class:"form-label"},"Password",-1),$e=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary"},"Login",-1);function Ne(e,t,o,n,l,r){return(0,s.uX)(),(0,s.CE)("div",Ee,[(0,s.Lk)("div",Ae,[(0,s.Lk)("div",Ue,[(0,s.Lk)("div",Me,[Pe,(0,s.Lk)("div",Ke,[(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>n.login&&n.login(...e)),["prevent"]))},[(0,s.Lk)("div",Re,[Ie,(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),class:"form-control",placeholder:"Email",required:""},null,512),[[a.Jo,n.email]])]),(0,s.Lk)("div",xe,[je,(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),class:"form-control",placeholder:"Password",required:""},null,512),[[a.Jo,n.password]])]),$e],32)])])])])])}var Xe=o(5600),Fe={setup(){const e=(0,A.Pj)(),t=(0,ke.KR)(""),o=(0,ke.KR)(""),a=async()=>{const a=(0,Xe.xI)();try{const s=await(0,Xe.x9)(a,o.value,t.value),n=s.user,l=(0,ge.C3)(),r=(0,ge.KR)(l,`users/${n.uid}`),i=await(0,ge.Jt)(r);i.exists()&&(n.username=i.val().username);const c=await e.dispatch("login",n);c?$a.push("/admin-dashboard"):$a.push("/"),e.dispatch("showNotification",{message:"Connexion réussie",type:"success"}),o.value="",t.value=""}catch(s){console.error(s.code),console.error(s.message),e.dispatch("showNotification",{message:s.message,type:"error"})}};return{email:o,password:t,login:a}}};const Te=(0,V.A)(Fe,[["render",Ne]]);var _e=Te;const Je={class:"container mt-5"},Ve={class:"row justify-content-center"},Oe={class:"col-md-12"},Se={class:"card"},De=(0,s.Lk)("div",{class:"card-header"},"Inscription",-1),Qe={class:"card-body"},We={class:"mb-3"},ze=(0,s.Lk)("label",{class:"form-label"},"Nom d'utilisateur",-1),Be={class:"mb-3"},qe=(0,s.Lk)("label",{class:"form-label"},"Email",-1),Ge={class:"mb-3"},Ze=(0,s.Lk)("label",{class:"form-label"},"Mot de passe",-1),He=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary"},"Inscription",-1),Ye=(0,s.Lk)("br",null,null,-1);function et(e,t,o,n,l,r){return(0,s.uX)(),(0,s.CE)("div",Je,[(0,s.Lk)("div",Ve,[(0,s.Lk)("div",Oe,[(0,s.Lk)("div",Se,[De,(0,s.Lk)("div",Qe,[(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>n.register&&n.register(...e)),["prevent"]))},[(0,s.Lk)("div",We,[ze,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),class:"form-control",placeholder:"Nom d'utilisateur",required:""},null,512),[[a.Jo,n.username]])]),(0,s.Lk)("div",Be,[qe,(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),class:"form-control",placeholder:"Email",required:""},null,512),[[a.Jo,n.email]])]),(0,s.Lk)("div",Ge,[Ze,(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),class:"form-control",placeholder:"Mot de passe",required:""},null,512),[[a.Jo,n.password]])]),He],32),Ye])])])])])}var tt={setup(){const e=(0,A.Pj)(),t=(0,ke.KR)(""),o=(0,ke.KR)(""),a=(0,ke.KR)(""),s=async()=>{const s=(0,Xe.xI)();(0,Xe.eG)(s);const n=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;if(n.test(a.value))if(o.value.length<6)e.dispatch("showNotification",{message:"Le mot de passe doit comporter au moins 6 caractères",type:"error"});else try{const n=await(0,Xe.eJ)(s,a.value,o.value),l=n.user,r=(0,ge.C3)(),i=(0,ge.KR)(r,`users/${l.uid}`);await(0,ge.hZ)(i,{admin:!1,email:l.email,username:t.value});const c=await(0,ge.Jt)(i);c.exists()&&(l.username=c.val().username,l.admin=c.val().admin);const d=await e.dispatch("login",l);d?$a.push("/admin-dashboard"):$a.push("/"),e.dispatch("showNotification",{message:"Inscription réussie",type:"success"}),t.value="",o.value="",a.value=""}catch(l){console.error(l.code),console.error(l.message),e.dispatch("showNotification",{message:l.message,type:"error"})}else e.dispatch("showNotification",{message:"L'email n'est pas valide",type:"error"})};return{username:t,password:o,email:a,register:s}}};const ot=(0,V.A)(tt,[["render",et]]);var at=ot,st=o(4912);const nt=e=>((0,s.Qi)("data-v-2900739f"),e=e(),(0,s.jt)(),e),lt={class:"not-found-container"},rt=nt((()=>(0,s.Lk)("img",{src:st,alt:"Logo",class:"logo"},null,-1))),it=nt((()=>(0,s.Lk)("h1",null,"404 Not Found",-1))),ct=nt((()=>(0,s.Lk)("p",null,"La page que vous recherchez n'existe pas.",-1))),dt=[rt,it,ct];function ut(e,t,o,a,n,l){return(0,s.uX)(),(0,s.CE)("div",lt,dt)}var mt={name:"NotFound"};const pt=(0,V.A)(mt,[["render",ut],["__scopeId","data-v-2900739f"]]);var vt=pt;const bt=e=>((0,s.Qi)("data-v-14a1f6fe"),e=e(),(0,s.jt)(),e),kt={class:"dashboard"},gt=bt((()=>(0,s.Lk)("div",{class:"icon"},[(0,s.Lk)("i",{class:"fas fa-users"})],-1))),Lt=bt((()=>(0,s.Lk)("div",{class:"title"},"Gestion des utilisateurs",-1))),ht=[gt,Lt],yt=bt((()=>(0,s.Lk)("div",{class:"icon"},[(0,s.Lk)("i",{class:"fas fa-box-open"})],-1))),ft=bt((()=>(0,s.Lk)("div",{class:"title"},"Gestion des produits",-1))),Ct=[yt,ft];function wt(e,t,o,a,n,l){return(0,s.uX)(),(0,s.CE)("div",kt,[(0,s.Lk)("div",{class:"card",onClick:t[0]||(t[0]=t=>e.$router.push("/user-management"))},ht),(0,s.Lk)("div",{class:"card",onClick:t[1]||(t[1]=t=>e.$router.push("/product-management"))},Ct)])}var Et={};const At=(0,V.A)(Et,[["render",wt],["__scopeId","data-v-14a1f6fe"]]);var Ut=At;async function Mt(e){const t=(0,ge.C3)(),o=(0,ge.KR)(t,`users/${e}`),a=await(0,ge.Jt)(o),s=a.val();if(s)return!0===s.admin;throw new Error("User does not exist")}var Pt=(0,A.y$)({state:{isLoading:!0,isLoggedIn:!1,user:null,admin:!1,users:{},notification:{message:"",type:"info"}},mutations:{setLoading(e,t){e.isLoading=t},setUser(e,t){e.user=t,e.isLoggedIn=!!t,e.admin=!!t&&t.admin,localStorage.setItem("authToken",t.authToken)},setNotification(e,t){e.notification=t}},actions:{async init({dispatch:e}){return new Promise(((t,o)=>{const a=(0,Xe.hg)((0,Xe.xI)(),(o=>{o&&e("checkAdminStatus"),a(),t()}),o)}))},async login({commit:e},t){const o=await Mt(t.uid);return e("setUser",{...t,admin:o}),o},logout({commit:e}){const t=(0,Xe.xI)();(0,Xe.CI)(t).then((()=>{e("setUser",null),localStorage.removeItem("authToken"),localStorage.removeItem("user")})).catch((e=>{console.error(e)}))},showNotification({commit:e},t){e("setNotification",t),setTimeout((()=>{e("setNotification",{message:"",type:"info"})}),3e3)},async checkAdminStatus({commit:e}){const t=(0,Xe.xI)(),o=t.currentUser;if(o)try{const t=await Mt(o.uid),a=(0,ge.C3)(),s=(0,ge.KR)(a,`users/${o.uid}`),n=await(0,ge.Jt)(s);return n.exists()&&(o.username=n.val().username),e("setUser",{...o,admin:t}),Promise.resolve()}catch(a){return Promise.reject(a)}else{const t=JSON.parse(localStorage.getItem("user"));t&&e("setUser",t)}}}});const Kt=e=>((0,s.Qi)("data-v-63a4af42"),e=e(),(0,s.jt)(),e),Rt={class:"mt-5"},It={class:"col-6"},xt={class:"mb-3"},jt=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Gestion des utilisateurs",-1))),$t=Kt((()=>(0,s.Lk)("hr",null,null,-1))),Nt=Kt((()=>(0,s.Lk)("div",null,null,-1))),Xt={class:"table-responsive"},Ft={class:"table table-striped"},Tt=Kt((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Nom d'utilisateur"),(0,s.Lk)("th",null,"Email"),(0,s.Lk)("th",null,"UID"),(0,s.Lk)("th",null,"Admin"),(0,s.Lk)("th",null,"Actions")])],-1))),_t={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check-circle-fill svg-icon",viewBox:"0 0 16 16"},Jt=Kt((()=>(0,s.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323A.75.75 0 0 0 4.616 8.03l2.363 2.394a.75.75 0 0 0 1.06 0l4.886-4.976a.75.75 0 0 0-.025-1.065z"},null,-1))),Vt=[Jt],Ot={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill svg-icon",viewBox:"0 0 16 16"},St=Kt((()=>(0,s.Lk)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.293-2.707a1 1 0 0 0-1.414-1.414L8 6.586 5.707 4.293a1 1 0 0 0-1.414 1.414L6.586 8l-2.293 2.293a1 1 0 0 0 1.414 1.414L8 9.414l2.293 2.293a1 1 0 0 0 1.414-1.414L9.414 8l2.293-2.293z"},null,-1))),Dt=[St],Qt=["onClick"],Wt=["onClick"],zt=["onClick"],Bt={class:"modal-dialog"},qt={class:"modal-content"},Gt={class:"modal-header"},Zt=Kt((()=>(0,s.Lk)("h5",{class:"modal-title"},"Modifier l'utilisateur",-1))),Ht={class:"modal-body"},Yt={class:"mb-3"},eo=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Nom d'utilisateur",-1))),to={class:"mb-3"},oo=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Admin",-1))),ao=Kt((()=>(0,s.Lk)("option",{value:!0},"True",-1))),so=Kt((()=>(0,s.Lk)("option",{value:!1},"False",-1))),no=[ao,so],lo={class:"modal-footer"},ro={class:"modal-dialog"},io={class:"modal-content"},co={class:"modal-header"},uo=Kt((()=>(0,s.Lk)("h5",{class:"modal-title"},"Ajouter un utilisateur",-1))),mo={class:"modal-body"},po={class:"mb-3"},vo=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Nom d'utilisateur",-1))),bo={class:"mb-3"},ko=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Mot de passe",-1))),go={class:"mb-3"},Lo=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Email",-1))),ho={class:"mb-3"},yo=Kt((()=>(0,s.Lk)("label",{class:"form-label"},"Admin",-1))),fo=Kt((()=>(0,s.Lk)("option",{value:!0},"True",-1))),Co=Kt((()=>(0,s.Lk)("option",{value:!1},"False",-1))),wo=[fo,Co],Eo={key:0,class:"alert alert-danger"},Ao={class:"modal-footer"};function Uo(e,t,o,n,l,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("button",{class:"btn btn-secondary float-right go-back-button",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},"Retour"),(0,s.Lk)("div",Rt,[(0,s.Lk)("div",It,[(0,s.Lk)("div",xt,[jt,$t,(0,s.Lk)("button",{class:"btn btn-success mb-3",onClick:t[1]||(t[1]=(...e)=>n.openAddUserModal&&n.openAddUserModal(...e))},"Ajouter un utilisateur"),Nt])]),(0,s.Lk)("div",Xt,[(0,s.Lk)("table",Ft,[Tt,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.users,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",null,(0,i.v_)(e.username),1),(0,s.Lk)("td",null,(0,i.v_)(e.email),1),(0,s.Lk)("td",null,(0,i.v_)(t),1),(0,s.Lk)("td",null,[e.admin?((0,s.uX)(),(0,s.CE)("svg",_t,Vt)):((0,s.uX)(),(0,s.CE)("svg",Ot,Dt))]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:o=>n.openEditUserModal(e,t)},"Modifier",8,Qt),(0,s.Lk)("button",{class:"btn btn-danger me-2",onClick:e=>n.deleteUser(t)},"Supprimer",8,Wt),(0,s.Lk)("button",{class:"btn btn-secondary me-2",onClick:e=>n.toggleAdmin(t)},"Changer le statut d'admin",8,zt)])])))),128))])])]),n.isEditUserModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(["modal",{"show d-block":n.isEditUserModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",Bt,[(0,s.Lk)("div",qt,[(0,s.Lk)("div",Gt,[Zt,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[2]||(t[2]=(...e)=>n.closeEditUserModal&&n.closeEditUserModal(...e))})]),(0,s.Lk)("div",Ht,[(0,s.Lk)("div",Yt,[eo,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.editedUser.username=e),class:"form-control"},null,512),[[a.Jo,n.editedUser.username]])]),(0,s.Lk)("div",to,[oo,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.editedUser.admin=e),class:"form-control"},no,512),[[a.u1,n.editedUser.admin]])])]),(0,s.Lk)("div",lo,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>n.closeEditUserModal&&n.closeEditUserModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>n.editUser(n.editedUser,n.editedUser.uid))},"Enregistrer les modifications")])])])],2)):(0,s.Q3)("",!0),n.isAddUserModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,i.C4)(["modal",{"show d-block":n.isAddUserModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",ro,[(0,s.Lk)("div",io,[(0,s.Lk)("div",co,[uo,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[7]||(t[7]=(...e)=>n.closeAddUserModal&&n.closeAddUserModal(...e))})]),(0,s.Lk)("div",mo,[(0,s.Lk)("div",po,[vo,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>n.newUser.username=e),class:"form-control"},null,512),[[a.Jo,n.newUser.username]])]),(0,s.Lk)("div",bo,[ko,(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[9]||(t[9]=e=>n.newUser.password=e),class:"form-control"},null,512),[[a.Jo,n.newUser.password]])]),(0,s.Lk)("div",go,[Lo,(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[10]||(t[10]=e=>n.newUser.email=e),class:"form-control"},null,512),[[a.Jo,n.newUser.email]])]),(0,s.Lk)("div",ho,[yo,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.newUser.admin=e),class:"form-control"},wo,512),[[a.u1,n.newUser.admin]])]),n.newUser.errorMessage?((0,s.uX)(),(0,s.CE)("div",Eo,(0,i.v_)(n.newUser.errorMessage),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ao,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...e)=>n.closeAddUserModal&&n.closeAddUserModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=(...e)=>n.addUser&&n.addUser(...e))},"Ajouter l'utilisateur")])])])],2)):(0,s.Q3)("",!0)])],64)}var Mo={methods:{goBack(){this.$router.push("/admin-dashboard")}},setup(){const e=(0,ge.C3)(),t=(0,ke.KR)({}),o=(0,ke.KR)(!1),a=(0,ke.KR)({}),n=(0,ke.KR)(!1),l=(0,ke.KR)({});(0,s.sV)((async()=>{const o=(0,ge.KR)(e,"users");(0,ge.Zy)(o,(e=>{t.value=e.val()}))}));const r=async t=>{const o=(0,ge.KR)(e,`users/${t}`),a=await(0,ge.Jt)(o),s=a.val();await(0,ge.yo)(o,{admin:!s.admin})},i=(e,t)=>{a.value={...e,uid:t},o.value=!0,console.log(a.value)},c=()=>{o.value=!1},d=async(t,o)=>{const a=(0,ge.KR)(e,`users/${o}`);await(0,ge.yo)(a,{admin:t.admin,username:t.username}),c()},u=async e=>{const t=(0,Xe.xI)(),o=t.currentUser;if(o&&o.uid===e){await(0,Xe.hG)(o).catch((t=>{console.error(`Failed to delete user: ${e}`,t)}));const t=(0,ge.C3)(),a=(0,ge.KR)(t,`users/${e}`);await(0,ge.TF)(a).catch((t=>{console.error(`Failed to delete user from database: ${e}`,t)}))}else console.error("User does not exist or is not currently signed in:",e)},m=()=>{l.value={username:"",password:"",admin:!1},n.value=!0},p=()=>{n.value=!1},v=async()=>{const e=(0,Xe.xI)(),{username:t,password:o,email:a,admin:s}=l.value;try{const n=await(0,Xe.eJ)(e,a,o),l=n.user;await(0,Xe.r7)(l,{displayName:t});const r=(0,ge.C3)(),i=(0,ge.KR)(r,`users/${l.uid}`);await(0,ge.yo)(i,{admin:s,email:a,username:t}),p(),Pt.dispatch("showNotification",{message:"Utilisateur ajouté avec succès",type:"success"})}catch(n){console.error(`Failed to create user: ${t}`,n.code,n.message),Pt.dispatch("showNotification",{message:`Échec de l'ajout de l'utilisateur : ${n.message}`,type:"error"})}};return{users:t,toggleAdmin:r,isEditUserModalOpen:o,editedUser:a,openEditUserModal:i,closeEditUserModal:c,editUser:d,deleteUser:u,isAddUserModalOpen:n,newUser:l,openAddUserModal:m,closeAddUserModal:p,addUser:v}}};const Po=(0,V.A)(Mo,[["render",Uo],["__scopeId","data-v-63a4af42"]]);var Ko=Po;const Ro=e=>((0,s.Qi)("data-v-31679dfc"),e=e(),(0,s.jt)(),e),Io={class:"mt-5"},xo={class:"col-6"},jo={class:"mb-3"},$o=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Gestion des Produits",-1))),No=["onClick"],Xo={class:"mb-3"},Fo={class:"table-responsive"},To={class:"table table-striped"},_o=Ro((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Image"),(0,s.Lk)("th",null,"Nom du produit"),(0,s.Lk)("th",null,"Prix"),(0,s.Lk)("th",null,"Actions")])],-1))),Jo=["src"],Vo=["onClick"],Oo=["onClick"],So={class:"modal-dialog"},Do={class:"modal-content"},Qo={class:"modal-header"},Wo=Ro((()=>(0,s.Lk)("h5",{class:"modal-title"},"Modifier le produit",-1))),zo={class:"modal-body"},Bo={class:"mb-3"},qo=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Nom du produit",-1))),Go={class:"mb-3"},Zo=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Prix du produit",-1))),Ho={class:"mb-3"},Yo=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Lien de la photo du produit",-1))),ea={class:"modal-footer"},ta={class:"modal-dialog"},oa={class:"modal-content"},aa={class:"modal-header"},sa=Ro((()=>(0,s.Lk)("h5",{class:"modal-title"},"Ajouter un produit",-1))),na={class:"modal-body"},la={class:"mb-3"},ra=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Nom du produit",-1))),ia={class:"mb-3"},ca=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Prix du produit",-1))),da={class:"mb-3"},ua=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Lien de la photo du produit",-1))),ma={class:"mb-3"},pa=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Catégorie du produit",-1))),va=["value"],ba=Ro((()=>(0,s.Lk)("option",{value:"new"},"Ajouter une nouvelle catégorie",-1))),ka={key:0,class:"mb-3"},ga=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Nom de la nouvelle catégorie",-1))),La={class:"modal-footer"},ha={class:"modal-dialog"},ya={class:"modal-content"},fa={class:"modal-header"},Ca=Ro((()=>(0,s.Lk)("h5",{class:"modal-title"},"Supprimer une catégorie",-1))),wa={class:"modal-body"},Ea={class:"mb-3"},Aa=Ro((()=>(0,s.Lk)("label",{class:"form-label"},"Catégorie à supprimer",-1))),Ua=["value"],Ma={class:"modal-footer"};function Pa(e,t,o,n,l,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("button",{class:"btn btn-secondary float-right go-back-button",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},"Retour"),(0,s.Lk)("div",Io,[(0,s.Lk)("div",xo,[(0,s.Lk)("div",jo,[$o,(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"btn btn-outline-primary me-2",onClick:t[1]||(t[1]=e=>n.selectedCategory="")},"Tous les produits"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.categories,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:"btn btn-outline-secondary me-2",onClick:t=>n.selectedCategory=e},(0,i.v_)(e),9,No)))),128))])]),(0,s.Lk)("div",Xo,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:t[2]||(t[2]=(...e)=>n.openAddProductModal&&n.openAddProductModal(...e))},"Ajouter un produit"),(0,s.Lk)("button",{class:"btn btn-danger me-2",onClick:t[3]||(t[3]=(...e)=>n.openDeleteCategoryModal&&n.openDeleteCategoryModal(...e))},"Supprimer une catégorie")])]),(0,s.Lk)("div",Fo,[(0,s.Lk)("table",To,[_o,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredProducts,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.name},[(0,s.Lk)("td",null,[(0,s.Lk)("img",{src:e.image,alt:"Product image",class:"product-image"},null,8,Jo)]),(0,s.Lk)("td",null,(0,i.v_)(e.name),1),(0,s.Lk)("td",null,(0,i.v_)(e.price),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-primary me-2",onClick:t=>n.openEditModal(e)},"Modifier",8,Vo),(0,s.Lk)("button",{class:"btn btn-danger me-2",onClick:t=>n.deleteProduct(e,e.category)},"Supprimer",8,Oo)])])))),128))])])]),n.isEditModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(["modal",{"show d-block":n.isEditModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",So,[(0,s.Lk)("div",Do,[(0,s.Lk)("div",Qo,[Wo,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>n.closeEditModal&&n.closeEditModal(...e))})]),(0,s.Lk)("div",zo,[(0,s.Lk)("div",Bo,[qo,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.editedProduct.name=e),class:"form-control"},null,512),[[a.Jo,n.editedProduct.name]])]),(0,s.Lk)("div",Go,[Zo,(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>n.editedProduct.price=e),class:"form-control"},null,512),[[a.Jo,n.editedProduct.price]])]),(0,s.Lk)("div",Ho,[Yo,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>n.editedProduct.image=e),class:"form-control"},null,512),[[a.Jo,n.editedProduct.image]])])]),(0,s.Lk)("div",ea,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[8]||(t[8]=(...e)=>n.closeEditModal&&n.closeEditModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>n.editProduct&&n.editProduct(...e))},"Enregistrer les modifications")])])])],2)):(0,s.Q3)("",!0),n.isAddProductModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,i.C4)(["modal",{"show d-block":n.isAddProductModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",ta,[(0,s.Lk)("div",oa,[(0,s.Lk)("div",aa,[sa,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>n.closeAddProductModal&&n.closeAddProductModal(...e))})]),(0,s.Lk)("div",na,[(0,s.Lk)("div",la,[ra,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.newProduct.name=e),class:"form-control"},null,512),[[a.Jo,n.newProduct.name]])]),(0,s.Lk)("div",ia,[ca,(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>n.newProduct.price=e),class:"form-control"},null,512),[[a.Jo,n.newProduct.price]])]),(0,s.Lk)("div",da,[ua,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>n.newProduct.image=e),class:"form-control"},null,512),[[a.Jo,n.newProduct.image]])]),(0,s.Lk)("div",ma,[pa,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.newProduct.category=e),class:"form-control",onChange:t[15]||(t[15]=(...e)=>n.handleCategoryChange&&n.handleCategoryChange(...e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.categories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,i.v_)(e),9,va)))),128)),ba],544),[[a.u1,n.newProduct.category]])]),n.isNewCategory?((0,s.uX)(),(0,s.CE)("div",ka,[ga,(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>n.newCategory=e),class:"form-control"},null,512),[[a.Jo,n.newCategory]])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",La,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[17]||(t[17]=(...e)=>n.closeAddProductModal&&n.closeAddProductModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[18]||(t[18]=(...e)=>n.addProduct&&n.addProduct(...e))},"Ajouter le produit")])])])],2)):(0,s.Q3)("",!0),n.isDeleteCategoryModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:2,class:(0,i.C4)(["modal",{"show d-block":n.isDeleteCategoryModalOpen}]),tabindex:"-1"},[(0,s.Lk)("div",ha,[(0,s.Lk)("div",ya,[(0,s.Lk)("div",fa,[Ca,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[19]||(t[19]=(...e)=>n.closeDeleteCategoryModal&&n.closeDeleteCategoryModal(...e))})]),(0,s.Lk)("div",wa,[(0,s.Lk)("div",Ea,[Aa,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[20]||(t[20]=e=>n.categoryToDelete=e),class:"form-control"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.categories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Ua)))),128))],512),[[a.u1,n.categoryToDelete]])])]),(0,s.Lk)("div",Ma,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[21]||(t[21]=(...e)=>n.closeDeleteCategoryModal&&n.closeDeleteCategoryModal(...e))},"Fermer"),(0,s.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[22]||(t[22]=(...e)=>n.deleteCategory&&n.deleteCategory(...e))},"Supprimer la catégorie")])])])],2)):(0,s.Q3)("",!0)])],64)}var Ka={methods:{goBack(){this.$router.push("/admin-dashboard")}},setup(){const e=(0,ke.KR)({}),t=(0,ke.KR)(""),o=(0,ge.C3)(),a=(0,U.rd)(),n=(0,A.Pj)(),l=(0,ke.KR)(""),r=(0,A.Pj)(),i=(0,ke.KR)(!1),c=(0,ke.KR)({}),d=(0,ke.KR)(!1),u=(0,ke.KR)({}),m=(0,ke.KR)(!1),p=(0,ke.KR)(""),v=(0,ke.KR)(!1),b=(0,ke.KR)(!1),k=(0,ke.KR)(""),g=()=>{k.value="",b.value=!0},L=()=>{b.value=!1},h=async()=>{const e=(0,ge.KR)(o,`products/${k.value}`),t=await(0,ge.Jt)(e),a=t.val();for(const s in a){const e=(0,ge.KR)(o,`products/${k.value}/${s}`);await(0,ge.TF)(e).catch((e=>{console.error(`Échec de la suppression du produit : ${s} dans la catégorie : ${k.value}`,e)}))}await(0,ge.TF)(e).catch((e=>{console.error(`Échec de la suppression de la catégorie : ${k.value}`,e)})),L()},y=()=>{"new"===u.value.category?(v.value=!0,u.value.category=""):v.value=!1},f=()=>{u.value={},d.value=!0},C=()=>{d.value=!1},w=async()=>{v.value&&(u.value.category=p.value);const e=(0,ge.KR)(o,`products/${u.value.category}/${u.value.name}`);await(0,ge.hZ)(e,{name:u.value.name,price:u.value.price,image:u.value.image}).catch((e=>{console.error(`Échec de l'ajout du produit : ${u.value.name} dans la catégorie : ${u.value.category}`,e)})),C()},E=()=>{p.value="",m.value=!0},M=()=>{m.value=!1},P=async()=>{const e=(0,ge.KR)(o,`products/${p.value}`),t={name:p.value,products:{}};await(0,ge.hZ)(e,t).catch((e=>{console.error(`Échec de l'ajout de la catégorie : ${p.value}`,e)})),M()};(0,s.sV)((async()=>{if(n.state.admin){const t=(0,ge.KR)(o,"products");(0,ge.Zy)(t,(t=>{e.value=t.val()}))}else a.push("/")}));const K=e=>{c.value={...e},i.value=!0},R=()=>{i.value=!1},I=async()=>{const e=(0,ge.KR)(o,`products/${c.value.category}/${c.value.name}`);await(0,ge.yo)(e,{name:c.value.name,price:c.value.price,image:c.value.image}).catch((e=>{console.error(`Échec de la modification du produit : ${c.value.name} dans la catégorie : ${c.value.category}`,e)})),R()},x=async(e,t)=>{if(t&&e.name){const a=(0,ge.KR)(o,`products/${t}`),s=await(0,ge.Jt)(a),n=s.val();if(1===Object.keys(n).length)return void r.dispatch("showNotification",{message:`Échec de la suppression du produit : ${e.name} est le dernier produit de la catégorie : ${t}. Vous ne pouvez pas supprimer le dernier produit d'une catégorie.`,type:"error"});const l=(0,ge.KR)(o,`products/${t}/${e.name}`);await(0,ge.TF)(l).catch((o=>{console.error(`Échec de la suppression du produit : ${e.name} dans la catégorie : ${t}`,o)}))}else console.error(`Échec de la suppression du produit : La catégorie ou le nom du produit n'est pas défini. Catégorie : ${t}, Nom du produit : ${e.name}`)},j=(0,s.EW)((()=>Object.keys(e.value))),$=(0,s.EW)((()=>{let o=[];if(e.value){for(const t in e.value){const a=Object.values(e.value[t]);for(const e of a)e.category=t,o.push(e)}t.value&&(o=o.filter((e=>e.category===t.value))),l.value&&(o=o.filter((e=>e.name.includes(l.value))))}return o}));return{products:e,editProduct:I,deleteProduct:x,categories:j,selectedCategory:t,filteredProducts:$,searchTerm:l,isEditModalOpen:i,editedProduct:c,openEditModal:K,closeEditModal:R,isAddProductModalOpen:d,newProduct:u,openAddProductModal:f,closeAddProductModal:C,addProduct:w,isAddCategoryModalOpen:m,newCategory:p,openAddCategoryModal:E,closeAddCategoryModal:M,addCategory:P,isNewCategory:v,handleCategoryChange:y,isDeleteCategoryModalOpen:b,categoryToDelete:k,openDeleteCategoryModal:g,closeDeleteCategoryModal:L,deleteCategory:h}}};const Ra=(0,V.A)(Ka,[["render",Pa],["__scopeId","data-v-31679dfc"]]);var Ia=Ra;const xa=[{path:"/admin-dashboard",name:"AdminDashboard",component:Ut,meta:{requiresAdmin:!0}},{path:"/",name:"Home",component:we},{path:"/login",name:"Login",component:_e},{path:"/register",name:"Register",component:at},{path:"/admin-dashboard",name:"AdminDashboard",component:Ut},{path:"/:pathMatch(.*)*",name:"NotFound",component:vt},{path:"/admin-dashboard",name:"AdminDashboard",component:Ut,meta:{requiresAdmin:!0}},{path:"/user-management",name:"UserManagement",component:Ko,meta:{requiresAdmin:!0}},{path:"/product-management",name:"ProductManagement",component:Ia,meta:{requiresAdmin:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:vt}],ja=(0,U.aE)({history:(0,U.LA)("/vuejs-projet-web/"),routes:xa});ja.beforeEach(((e,t,o)=>{e.matched.some((e=>e.meta.requiresAdmin))?Pt.state.admin?o():o({name:"Home"}):("Login"===e.name||"Register"===e.name)&&Pt.state.isLoggedIn?o({name:"Home"}):o()}));var $a=ja,Na={data(){return{logoUrl:o(4912)}},setup(){const e=(0,A.Pj)(),t=(0,s.EW)((()=>e.state.isLoggedIn)),o=(0,s.EW)((()=>e.state.user?e.state.user.username:"")),a=(0,s.EW)((()=>e.state.admin)),n=()=>{e.dispatch("logout"),e.commit("logout"),$a.push("/"),e.dispatch("showNotification",{message:"Logged out successfully",type:"success"})};return{username:o,isLoggedIn:t,logout:n,isAdmin:a}}};const Xa=(0,V.A)(Na,[["render",E],["__scopeId","data-v-1b9d70e4"]]);var Fa=Xa;function Ta(e,t,o,a,n,l){return o.message?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,i.C4)(`notification ${o.type}`)},(0,i.v_)(o.message),3)):(0,s.Q3)("",!0)}var _a={props:{message:{type:String,default:""},type:{type:String,default:"info"}}};const Ja=(0,V.A)(_a,[["render",Ta],["__scopeId","data-v-67915a9c"]]);var Va=Ja,Oa={components:{AppNavbar:Fa,NotificationApp:Va},setup(){const e=(0,A.Pj)(),t=(0,s.EW)((()=>e.state.notification));return{notification:t}},data(){return{pageTitre:"Accueil"}},mounted(){document.title=this.pageTitre}};const Sa=(0,V.A)(Oa,[["render",r]]);var Da=Sa,Qa=o(6400);const Wa={apiKey:"AIzaSyAJRp8WxcFUDzBzsRnqG-TZTUQG3jWGjnQ",authDomain:"vuejs-ae8a0.firebaseapp.com",databaseURL:"https://vuejs-ae8a0-default-rtdb.europe-west1.firebasedatabase.app",projectId:"vuejs-ae8a0",storageBucket:"vuejs-ae8a0.appspot.com",messagingSenderId:"104652181195",appId:"1:104652181195:web:9bba7498e6fb88baa7d54e",measurementId:"G-2CJPHT3X6K"};(0,Qa.Wp)(Wa),Pt.dispatch("init").then((()=>{const e=(0,a.Ef)(Da);e.use(Pt),e.use($a),e.mount("#app")})).catch((e=>{console.error("Failed to init store: ",e)}))},4912:function(e,t,o){e.exports=o.p+"img/LogoToboo.f339544e.png"}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,function(){var e=[];o.O=function(t,a,s,n){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],n=e[d][2];for(var r=!0,i=0;i<a.length;i++)(!1&n||l>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(r=!1,n<l&&(l=n));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,s,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/vuejs-projet-web/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,l=a[0],r=a[1],i=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(i)var d=i(o)}for(t&&t(a);c<l.length;c++)n=l[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},a=self["webpackChunkprojet_web"]=self["webpackChunkprojet_web"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(1288)}));a=o.O(a)})();
//# sourceMappingURL=app.3e85d8bf.js.map